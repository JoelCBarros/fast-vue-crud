{"remainingRequest":"/home/joel/fast-vue-crud/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/fast-vue-crud/client/src/components/Books.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/joel/fast-vue-crud/client/src/components/Books.vue","mtime":1721318564801},{"path":"/home/joel/fast-vue-crud/client/node_modules/cache-loader/dist/cjs.js","mtime":1721089573011},{"path":"/home/joel/fast-vue-crud/client/node_modules/babel-loader/lib/index.js","mtime":1721089573915},{"path":"/home/joel/fast-vue-crud/client/node_modules/cache-loader/dist/cjs.js","mtime":1721089573011},{"path":"/home/joel/fast-vue-crud/client/node_modules/vue-loader/lib/index.js","mtime":1721089569879}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBbGVydCBmcm9tICcuL0FsZXJ0LnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvb2tzOiBbXSwKICAgICAgYm9va0Zvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGF1dGhvcjogJycsCiAgICAgICAgcmVhZDogW10sCiAgICAgIH0sCiAgICAgIGlzVXBkYXRlOiBmYWxzZSwKICAgICAgbWVzc2FnZTogJycsCiAgICAgIGZvcm1UaXRsZTogJycsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgYWxlcnQ6IEFsZXJ0LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldEJvb2tzKCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9ib29rcyc7CiAgICAgIGF4aW9zLmdldChwYXRoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuYm9va3MgPSByZXMuZGF0YS5ib29rczsKICAgICAgICAgIGlmICh0aGlzLmJvb2tzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnTm8gYm9va3MhIFBsZWFzZSBhZGQgb25lJzsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGFkZEJvb2socGF5bG9hZCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9ib29rcyc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgcGF5bG9hZCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnQm9vayBBZGRlZCEnOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgdGhpcy5nZXRCb29rcygpOwogICAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUJvb2socGF5bG9hZCwgYm9va0lEKSB7CiAgICAgIGNvbnN0IHBhdGggPSBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2Jvb2tzLyR7Ym9va0lEfWA7CiAgICAgIGF4aW9zLnB1dChwYXRoLCBwYXlsb2FkKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICdCb29rIHVwZGF0ZWQhJzsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UgPSB0cnVlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0Qm9vayhib29rKSB7CiAgICAgIHRoaXMubWVzc2FnZSA9ICcnOwogICAgICB0aGlzLmJvb2tGb3JtID0gYm9vazsKICAgICAgdGhpcy5mb3JtVGl0bGUgPSAnVXBkYXRlIEJvb2snOwogICAgICB0aGlzLmlzVXBkYXRlID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmVCb29rKGJvb2tJRCkgewogICAgICBjb25zdCBwYXRoID0gYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9ib29rcy8ke2Jvb2tJRH1gOwogICAgICBheGlvcy5kZWxldGUocGF0aCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnQm9vayByZW1vdmVkISc7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvbkRlbGV0ZUJvb2soYm9vaykgewogICAgICB0aGlzLm1lc3NhZ2UgPSAnJzsKICAgICAgdGhpcy4kYnZNb2RhbC5tc2dCb3hDb25maXJtKCdBcmUgeW91IHN1cmU/JykKICAgICAgICAudGhlbigodmFsdWUpID0+IHsKICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLnJlbW92ZUJvb2soYm9vay5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBpbml0Rm9ybSgpIHsKICAgICAgdGhpcy5ib29rRm9ybS50aXRsZSA9ICcnOwogICAgICB0aGlzLmJvb2tGb3JtLmF1dGhvciA9ICcnOwogICAgICB0aGlzLmJvb2tGb3JtLnJlYWQgPSBbXTsKICAgICAgdGhpcy5tZXNzYWdlID0gJyc7CiAgICB9LAogICAgb25TdWJtaXQoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLiRyZWZzLmJvb2tNb2RhbC5oaWRlKCk7CiAgICAgIGxldCByZWFkID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLmJvb2tGb3JtLnJlYWRbMF0pIHJlYWQgPSB0cnVlOwogICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIHRpdGxlOiB0aGlzLmJvb2tGb3JtLnRpdGxlLAogICAgICAgIGF1dGhvcjogdGhpcy5ib29rRm9ybS5hdXRob3IsCiAgICAgICAgcmVhZCwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuaXNVcGRhdGUpIHsKICAgICAgICB0aGlzLnVwZGF0ZUJvb2socGF5bG9hZCwgdGhpcy5ib29rRm9ybS5pZCk7CiAgICAgICAgdGhpcy5pc1VwZGF0ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkQm9vayhwYXlsb2FkKTsKICAgICAgfQogICAgICB0aGlzLmluaXRGb3JtKCk7CiAgICB9LAogICAgb25SZXNldChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuJHJlZnMuYm9va01vZGFsLmhpZGUoKTsKICAgICAgdGhpcy5pbml0Rm9ybSgpOwogICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Qm9va3MoKTsKICB9LAp9Owo="},{"version":3,"sources":["Books.vue"],"names":[],"mappings":";AAqEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Books.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-sm-10\">\n        <h1>Books</h1>\n        <hr><br><br>\n        <alert v-if=\"message != ''\" :message=\"message\"></alert>\n        <!-- eslint-disable-next-line max-len -->\n        <button type=\"button\" class=\"btn btn-success btn-sm\" v-b-modal.book-modal @click=\"formTitle = 'Add a new Book'\">\n          Add Book</button>\n        <br><br>\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Title</th>\n              <th scope=\"col\">Author</th>\n              <th scope=\"col\">Read?</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(book, index) in books\" :key=\"index\">\n              <td>{{ book.title }}</td>\n              <td>{{ book.author }}</td>\n              <td>\n                <span v-if=\"book.read\">Yes</span>\n                <span v-else>No</span>\n              </td>\n              <td>\n                <div class=\"btn-group\" role=\"group\">\n                  <!-- eslint-disable-next-line max-len -->\n                  <button type=\"button\" class=\"btn btn-warning btn-sm\" v-b-modal.book-modal\n                    @click=\"editBook(book)\">Update</button>\n                  <!-- eslint-disable-next-line max-len -->\n                  <button type=\"button\" class=\"btn btn-danger btn-sm\" @click=\"onDeleteBook(book)\">\n                    Delete\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <b-modal ref=\"bookModal\" id=\"book-modal\" :title=\"formTitle\" hide-footer>\n      <b-form @submit=\"onSubmit\" @reset=\"onReset\" class=\"w-100\">\n        <b-form-group id=\"form-title-group\" label=\"Title:\" label-for=\"form-title-input\">\n          <!-- eslint-disable-next-line max-len -->\n          <b-form-input id=\"form-title-input\" type=\"text\" v-model=\"bookForm.title\" required placeholder=\"Enter title\">\n          </b-form-input>\n        </b-form-group>\n        <b-form-group id=\"form-author-group\" label=\"Author:\" label-for=\"form-author-input\">\n          <b-form-input id=\"form-author-input\" type=\"text\" v-model=\"bookForm.author\" required\n            placeholder=\"Enter author\">\n          </b-form-input>\n        </b-form-group>\n        <b-form-group id=\"form-read-group\">\n          <b-form-checkbox-group v-model=\"bookForm.read\" id=\"form-checks\">\n            <b-form-checkbox value=\"true\">Read?</b-form-checkbox>\n          </b-form-checkbox-group>\n        </b-form-group>\n        <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n        <b-button type=\"reset\" variant=\"danger\">Reset</b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Alert from './Alert.vue';\n\nexport default {\n  data() {\n    return {\n      books: [],\n      bookForm: {\n        id: '',\n        title: '',\n        author: '',\n        read: [],\n      },\n      isUpdate: false,\n      message: '',\n      formTitle: '',\n    };\n  },\n  components: {\n    alert: Alert,\n  },\n\n  methods: {\n    getBooks() {\n      const path = 'http://localhost:8000/books';\n      axios.get(path)\n        .then((res) => {\n          this.books = res.data.books;\n          if (this.books.length === 0) {\n            this.message = 'No books! Please add one';\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    addBook(payload) {\n      const path = 'http://localhost:8000/books';\n      axios.post(path, payload)\n        .then(() => {\n          this.getBooks();\n          this.message = 'Book Added!';\n        })\n        .catch((error) => {\n          console.log(error);\n          this.getBooks();\n        });\n    },\n    updateBook(payload, bookID) {\n      const path = `http://localhost:8000/books/${bookID}`;\n      axios.put(path, payload)\n        .then(() => {\n          this.getBooks();\n          this.message = 'Book updated!';\n          this.showMessage = true;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    editBook(book) {\n      this.message = '';\n      this.bookForm = book;\n      this.formTitle = 'Update Book';\n      this.isUpdate = true;\n    },\n    removeBook(bookID) {\n      const path = `http://localhost:8000/books/${bookID}`;\n      axios.delete(path)\n        .then(() => {\n          this.getBooks();\n          this.message = 'Book removed!';\n        })\n        .catch((error) => {\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    onDeleteBook(book) {\n      this.message = '';\n      this.$bvModal.msgBoxConfirm('Are you sure?')\n        .then((value) => {\n          if (value) {\n            this.removeBook(book.id);\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    initForm() {\n      this.bookForm.title = '';\n      this.bookForm.author = '';\n      this.bookForm.read = [];\n      this.message = '';\n    },\n    onSubmit(evt) {\n      evt.preventDefault();\n      this.$refs.bookModal.hide();\n      let read = false;\n      if (this.bookForm.read[0]) read = true;\n      const payload = {\n        title: this.bookForm.title,\n        author: this.bookForm.author,\n        read,\n      };\n      if (this.isUpdate) {\n        this.updateBook(payload, this.bookForm.id);\n        this.isUpdate = false;\n      } else {\n        this.addBook(payload);\n      }\n      this.initForm();\n    },\n    onReset(evt) {\n      evt.preventDefault();\n      this.$refs.bookModal.hide();\n      this.initForm();\n      this.getBooks();\n    },\n  },\n  created() {\n    this.getBooks();\n  },\n};\n</script>\n"]}]}